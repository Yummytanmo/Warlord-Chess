# 需求文档

## 介绍

二国杀象棋是一个创新的棋类游戏，将传统象棋的规则与三国杀的武将技能系统相结合。玩家可以选择不同的三国武将，每个武将拥有独特的技能，这些技能会改变传统象棋的游戏规则，为游戏带来更多策略性和趣味性。

## 术语表

- **游戏系统**: 整个二国杀象棋游戏的核心系统
- **武将**: 玩家可选择的角色，每个武将拥有独特技能
- **技能**: 武将的特殊能力，可以改变游戏规则
- **棋子**: 象棋中的各种棋子（将、士、象、马、车、炮、兵）
- **九宫**: 象棋中将和士的活动区域
- **河界**: 象棋棋盘中间的分界线
- **兵标记**: 韩信武将技能中使用的特殊标记
- **限定技**: 每局游戏只能使用一次的技能
- **锁定技**: 被动触发，无法主动选择的技能
- **觉醒技**: 满足特定条件后激活的技能

## 需求

### 需求 1: 游戏基础框架

**用户故事:** 作为玩家，我希望能够开始一局二国杀象棋游戏，以便体验这种创新的棋类游戏。

#### 验收标准

1. 当玩家启动游戏时，游戏系统应当显示标准的象棋棋盘
2. 当游戏开始时，游戏系统应当按照传统象棋规则放置所有棋子
3. 当轮到玩家行动时，游戏系统应当允许玩家移动己方棋子
4. 当玩家移动棋子时，游戏系统应当验证移动的合法性
5. 当游戏结束时，游戏系统应当判定胜负结果

### 需求 2: 武将选择系统

**用户故事:** 作为玩家，我希望能够选择不同的三国武将，以便使用他们的独特技能。

#### 验收标准

1. 当游戏开始前，游戏系统应当提供武将选择界面
2. 当玩家选择武将时，游戏系统应当显示武将的技能描述
3. 当双方玩家都选择武将后，游戏系统应当开始游戏并激活相应技能
4. 当武将被选择时，游戏系统应当记录武将的所有技能状态
5. 当游戏进行中时，游戏系统应当显示当前武将和可用技能

### 需求 3: 项羽武将技能实现

**用户故事:** 作为选择项羽的玩家，我希望使用背水和霸王技能，以便获得兵的移动优势和马的特殊能力。

#### 验收标准

1. 当项羽的兵未过河时，游戏系统应当允许兵一步直接过河
2. 当项羽的兵过河后，游戏系统应当允许兵每次移动连走两步但最多前进一步
3. 当项羽的马移动时，游戏系统应当忽略拌马腿限制
4. 当项羽的马受到攻击时，游戏系统应当正常处理拌马腿限制
5. 当项羽连续两步都选择跳马时，游戏系统应当阻止第二次跳马

### 需求 4: 刘邦武将技能实现

**用户故事:** 作为选择刘邦的玩家，我希望使用更衣、亲征和鸿门技能，以便获得将、士、象的特殊能力。

#### 验收标准

1. 当刘邦使用更衣技能时，游戏系统应当允许将出九宫
2. 当刘邦使用亲征技能时，游戏系统应当强制对方将与己方将在同一条线上
3. 当亲征技能触发时，游戏系统应当移除移动路径上的阻挡棋子
4. 当刘邦的士移动时，游戏系统应当允许士出九宫但不能过河
5. 当刘邦的象移动时，游戏系统应当忽略象心限制

### 需求 5: 韩信武将技能实现

**用户故事:** 作为选择韩信的玩家，我希望使用点兵、用兵和益善技能，以便通过兵标记系统获得战略优势。

#### 验收标准

1. 当韩信开局时，游戏系统应当移除所有兵并给予两个兵标记
2. 当韩信回合开始时，游戏系统应当允许消耗兵标记在河内放置兵
3. 当韩信拥有五个兵标记时，游戏系统应当清除卒林线上所有棋子并放置五个兵
4. 当韩信使用用兵技能时，游戏系统应当允许任意棋子与兵交换位置
5. 当场上有能过河的棋子被移除时，游戏系统应当给韩信增加一个兵标记

### 需求 6: 萧何武将技能实现

**用户故事:** 作为选择萧何的玩家，我希望使用月下、成也和败也技能，以便获得棋子复活和特殊移动能力。

#### 验收标准

1. 当萧何使用月下技能时，游戏系统应当允许指定一个在场棋子与一个已离场棋子在下回合回到开局位置
2. 当萧何觉醒成也技能后，游戏系统应当允许月下棋子吃子后继续走一步
3. 当萧何移动将后，游戏系统应当强制要求再移动一步将
4. 当败也技能触发时，游戏系统应当验证第二次将的移动合法性
5. 当月下技能使用后，游戏系统应当标记萧何为已觉醒状态

### 需求 7: 张良武将技能实现

**用户故事:** 作为选择张良的玩家，我希望使用运筹、决胜和拾履技能，以便获得灵活的棋子控制能力。

#### 验收标准

1. 当张良移动将后，游戏系统应当允许再移动除车以外的一个己方棋子
2. 当张良第一次被叫将后，游戏系统应当允许连续移动两次将
3. 当张良的将第一次吃子后，游戏系统应当允许选择同名棋子增加在九宫内任意位置
4. 当决胜技能使用后，游戏系统应当标记该技能为已使用
5. 当拾履技能触发后，游戏系统应当标记张良为已觉醒状态

### 需求 8: 樊哙武将技能实现

**用户故事:** 作为选择樊哙的玩家，我希望使用舞剑、护主和赐爵技能，以便保护己方棋子并获得额外棋子。

#### 验收标准

1. 当樊哙使用舞剑技能时，游戏系统应当允许同名棋子与对方棋子相互击杀
2. 当樊哙的将被移走时，游戏系统应当将将退回上一步位置
3. 当护主技能触发时，游戏系统应当将攻击将的棋子回到初始位置
4. 当樊哙两个限定技都使用后，游戏系统应当允许将被移除的棋子添加在棋盘任何位置
5. 当赐爵技能触发后，游戏系统应当标记樊哙为已觉醒状态

### 需求 9: 技能状态管理

**用户故事:** 作为玩家，我希望游戏能够正确管理各种技能的状态，以便确保游戏规则的正确执行。

#### 验收标准

1. 当限定技被使用时，游戏系统应当标记该技能为已使用且本局不可再用
2. 当锁定技条件满足时，游戏系统应当自动触发技能效果
3. 当觉醒技条件满足时，游戏系统应当提示玩家可以觉醒并激活新技能
4. 当技能状态改变时，游戏系统应当更新用户界面显示
5. 当游戏结束时，游戏系统应当重置所有技能状态

### 需求 10: 用户界面系统

**用户故事:** 作为玩家，我希望有清晰直观的用户界面，以便了解游戏状态和操作游戏。

#### 验收标准

1. 当游戏运行时，游戏系统应当显示完整的象棋棋盘和棋子
2. 当轮到玩家行动时，游戏系统应当高亮显示可移动的棋子
3. 当玩家选择棋子时，游戏系统应当显示该棋子的可移动位置
4. 当技能可用时，游戏系统应当显示技能按钮和描述
5. 当游戏状态改变时，游戏系统应当实时更新界面显示