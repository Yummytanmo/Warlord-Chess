
> warlord-chess@0.1.0 test
> vitest --run src/test/properties/xiangyu-skills.test.ts

[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m

 RUN  v1.6.1 /Users/yummy/Code/Chess

 â¯ src/test/properties/xiangyu-skills.test.ts  (12 tests | 2 failed) 124ms
   â¯ src/test/properties/xiangyu-skills.test.ts > Xiang Yu Beishui Skill Properties > Property 4: Beishui skill - crossed pawns forward limit enforcement
     â†’ Property failed after 1 tests
{ seed: 803092901, path: "0:1:0:0:0", endOnFailure: true }
Counterexample: [{"pawn":{"id":" ","type":"pawn","color":"black","position":{"x":0,"y":5},"isAlive":true},"gameState":{"board":{"grid":[[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[{"id":" ","type":"pawn","color":"black","position":{"x":0,"y":5},"isAlive":true},null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null]],"BOARD_SIZE":{"width":9,"height":10}},"players":[{"id":"xiangyu_player_black","color":"black","hero":{"id":"xiangyu","name":"é¡¹ç¾½","skills":[{"isUsed":false,"type":"passive","id":"xiangyu_beishui","name":"èƒŒæ°´","description":"ä½ çš„å…µæœªè¿‡æ²³æ—¶ï¼Œå¯ä»¥ä¸€æ­¥ç›´æ¥è¿‡æ²³ï¼›è¿‡æ²³åï¼Œæ¯æ¬¡ç§»åŠ¨å¯ä»¥è¿èµ°ä¸¤æ­¥ï¼Œä½†æœ€å¤šå‰è¿›ä¸€æ­¥ã€‚"},{"isUsed":false,"type":"passive","id":"xiangyu_bawang","name":"éœ¸ç‹","description":"ä½ çš„é©¬ç§»åŠ¨æ—¶ï¼Œä¸å—æ‹Œé©¬è…¿å½±å“ï¼ˆé™¤éé©¬å—æ”»å‡»ï¼‰ï¼›ä½ ä¸èƒ½è¿ç»­ä¸¤æ­¥éƒ½é€‰æ‹©è·³é©¬ã€‚"}],"awakened":false,"avatar":"/heroes/xiangyu.jpg","description":"è¥¿æ¥šéœ¸ç‹ï¼ŒåŠ›æ‹”å±±å…®æ°”ç›–ä¸–ã€‚æ‹¥æœ‰å¼ºå¤§çš„å…µç§å’Œé©¬åŒ¹ä¼˜åŠ¿ã€‚"},"pieces":[]},{"id":"opponent","color":"red","hero":{"id":"test_hero","name":"æµ‹è¯•æ­¦å°†","skills":[],"awakened":false},"pieces":[]}],"currentPlayer":"black","gamePhase":"playing","moveHistory":[]}},2]
Shrunk 4 time(s)
Got AssertionError: expected false to be true // Object.is equality
    at /Users/yummy/Code/Chess/src/test/properties/xiangyu-skills.test.ts:496:82
    at Property.predicate (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/property/Property.js:14:54)
    at Property.run (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/property/Property.generic.js:46:33)
    at runIt (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/runner/Runner.js:18:30)
    at check (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/runner/Runner.js:62:11)
    at Proxy.assert (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/runner/Runner.js:65:17)
    at /Users/yummy/Code/Chess/src/test/properties/xiangyu-skills.test.ts:459:8
    at file:///Users/yummy/Code/Chess/node_modules/@vitest/runner/dist/index.js:135:14
    at file:///Users/yummy/Code/Chess/node_modules/@vitest/runner/dist/index.js:60:26
    at runTest (file:///Users/yummy/Code/Chess/node_modules/@vitest/runner/dist/index.js:781:17)

Hint: Enable verbose mode in order to have the list of all failing values encountered during the run
   â¯ src/test/properties/xiangyu-skills.test.ts > Xiang Yu Beishui Skill Properties > Property 4: Beishui skill - total step limit enforcement
     â†’ Property failed after 1 tests
{ seed: -1431590058, path: "0:0:0:0:0", endOnFailure: true }
Counterexample: [{"pawn":{"id":" ","type":"pawn","color":"red","position":{"x":0,"y":0},"isAlive":true},"gameState":{"board":{"grid":[[{"id":" ","type":"pawn","color":"red","position":{"x":0,"y":0},"isAlive":true},null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null]],"BOARD_SIZE":{"width":9,"height":10}},"players":[{"id":"xiangyu_player_red","color":"red","hero":{"id":"xiangyu","name":"é¡¹ç¾½","skills":[{"isUsed":false,"type":"passive","id":"xiangyu_beishui","name":"èƒŒæ°´","description":"ä½ çš„å…µæœªè¿‡æ²³æ—¶ï¼Œå¯ä»¥ä¸€æ­¥ç›´æ¥è¿‡æ²³ï¼›è¿‡æ²³åï¼Œæ¯æ¬¡ç§»åŠ¨å¯ä»¥è¿èµ°ä¸¤æ­¥ï¼Œä½†æœ€å¤šå‰è¿›ä¸€æ­¥ã€‚"},{"isUsed":false,"type":"passive","id":"xiangyu_bawang","name":"éœ¸ç‹","description":"ä½ çš„é©¬ç§»åŠ¨æ—¶ï¼Œä¸å—æ‹Œé©¬è…¿å½±å“ï¼ˆé™¤éé©¬å—æ”»å‡»ï¼‰ï¼›ä½ ä¸èƒ½è¿ç»­ä¸¤æ­¥éƒ½é€‰æ‹©è·³é©¬ã€‚"}],"awakened":false,"avatar":"/heroes/xiangyu.jpg","description":"è¥¿æ¥šéœ¸ç‹ï¼ŒåŠ›æ‹”å±±å…®æ°”ç›–ä¸–ã€‚æ‹¥æœ‰å¼ºå¤§çš„å…µç§å’Œé©¬åŒ¹ä¼˜åŠ¿ã€‚"},"pieces":[]},{"id":"opponent","color":"black","hero":{"id":"test_hero","name":"æµ‹è¯•æ­¦å°†","skills":[],"awakened":false},"pieces":[]}],"currentPlayer":"red","gamePhase":"playing","moveHistory":[]}},3]
Shrunk 4 time(s)
Got AssertionError: expected 'å…µ/å’åªèƒ½èµ°ä¸€æ ¼' to contain 'ä¸¤æ­¥'
    at /Users/yummy/Code/Chess/src/test/properties/xiangyu-skills.test.ts:546:31
    at Property.predicate (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/property/Property.js:14:54)
    at Property.run (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/property/Property.generic.js:46:33)
    at runIt (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/runner/Runner.js:18:30)
    at check (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/runner/Runner.js:62:11)
    at Proxy.assert (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/runner/Runner.js:65:17)
    at /Users/yummy/Code/Chess/src/test/properties/xiangyu-skills.test.ts:502:8
    at file:///Users/yummy/Code/Chess/node_modules/@vitest/runner/dist/index.js:135:14
    at file:///Users/yummy/Code/Chess/node_modules/@vitest/runner/dist/index.js:60:26
    at runTest (file:///Users/yummy/Code/Chess/node_modules/@vitest/runner/dist/index.js:781:17)

Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  src/test/properties/xiangyu-skills.test.ts > Xiang Yu Beishui Skill Properties > Property 4: Beishui skill - crossed pawns forward limit enforcement
Error: Property failed after 1 tests
{ seed: 803092901, path: "0:1:0:0:0", endOnFailure: true }
Counterexample: [{"pawn":{"id":" ","type":"pawn","color":"black","position":{"x":0,"y":5},"isAlive":true},"gameState":{"board":{"grid":[[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[{"id":" ","type":"pawn","color":"black","position":{"x":0,"y":5},"isAlive":true},null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null]],"BOARD_SIZE":{"width":9,"height":10}},"players":[{"id":"xiangyu_player_black","color":"black","hero":{"id":"xiangyu","name":"é¡¹ç¾½","skills":[{"isUsed":false,"type":"passive","id":"xiangyu_beishui","name":"èƒŒæ°´","description":"ä½ çš„å…µæœªè¿‡æ²³æ—¶ï¼Œå¯ä»¥ä¸€æ­¥ç›´æ¥è¿‡æ²³ï¼›è¿‡æ²³åï¼Œæ¯æ¬¡ç§»åŠ¨å¯ä»¥è¿èµ°ä¸¤æ­¥ï¼Œä½†æœ€å¤šå‰è¿›ä¸€æ­¥ã€‚"},{"isUsed":false,"type":"passive","id":"xiangyu_bawang","name":"éœ¸ç‹","description":"ä½ çš„é©¬ç§»åŠ¨æ—¶ï¼Œä¸å—æ‹Œé©¬è…¿å½±å“ï¼ˆé™¤éé©¬å—æ”»å‡»ï¼‰ï¼›ä½ ä¸èƒ½è¿ç»­ä¸¤æ­¥éƒ½é€‰æ‹©è·³é©¬ã€‚"}],"awakened":false,"avatar":"/heroes/xiangyu.jpg","description":"è¥¿æ¥šéœ¸ç‹ï¼ŒåŠ›æ‹”å±±å…®æ°”ç›–ä¸–ã€‚æ‹¥æœ‰å¼ºå¤§çš„å…µç§å’Œé©¬åŒ¹ä¼˜åŠ¿ã€‚"},"pieces":[]},{"id":"opponent","color":"red","hero":{"id":"test_hero","name":"æµ‹è¯•æ­¦å°†","skills":[],"awakened":false},"pieces":[]}],"currentPlayer":"black","gamePhase":"playing","moveHistory":[]}},2]
Shrunk 4 time(s)
Got AssertionError: expected false to be true // Object.is equality
    at /Users/yummy/Code/Chess/src/test/properties/xiangyu-skills.test.ts:496:82
    at Property.predicate (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/property/Property.js:14:54)
    at Property.run (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/property/Property.generic.js:46:33)
    at runIt (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/runner/Runner.js:18:30)
    at check (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/runner/Runner.js:62:11)
    at Proxy.assert (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/runner/Runner.js:65:17)
    at /Users/yummy/Code/Chess/src/test/properties/xiangyu-skills.test.ts:459:8
    at file:///Users/yummy/Code/Chess/node_modules/@vitest/runner/dist/index.js:135:14
    at file:///Users/yummy/Code/Chess/node_modules/@vitest/runner/dist/index.js:60:26
    at runTest (file:///Users/yummy/Code/Chess/node_modules/@vitest/runner/dist/index.js:781:17)

Hint: Enable verbose mode in order to have the list of all failing values encountered during the run
 â¯ src/test/properties/xiangyu-skills.test.ts:496:82
    494|         expect(result.isValid).toBe(false);
    495|         // é”™è¯¯æ¶ˆæ¯å¯èƒ½æ˜¯ "å‰è¿›ä¸€æ­¥" æˆ– "ä¸¤æ­¥"ï¼ˆå½“æ€»æ­¥æ•° > 2 æ—¶å…ˆè§¦å‘â€¦
    496|         expect(result.reason?.includes('å‰è¿›ä¸€æ­¥') || result.reason?.iâ€¦
       |                                                                                  ^
    497|       }
    498|     ), { numRuns: 100 });
 â¯ Property.predicate node_modules/fast-check/lib/esm/check/property/Property.js:14:54
 â¯ Property.run node_modules/fast-check/lib/esm/check/property/Property.generic.js:46:33
 â¯ runIt node_modules/fast-check/lib/esm/check/runner/Runner.js:18:30
 â¯ check node_modules/fast-check/lib/esm/check/runner/Runner.js:62:11
 â¯ Proxy.assert node_modules/fast-check/lib/esm/check/runner/Runner.js:65:17
 â¯ src/test/properties/xiangyu-skills.test.ts:459:8
 â¯ buildError node_modules/fast-check/lib/esm/check/runner/utils/RunDetailsFormatter.js:126:15
 â¯ throwIfFailed node_modules/fast-check/lib/esm/check/runner/utils/RunDetailsFormatter.js:138:11
 â¯ reportRunDetails node_modules/fast-check/lib/esm/check/runner/utils/RunDetailsFormatter.js:151:16
 â¯ Proxy.assert node_modules/fast-check/lib/esm/check/runner/Runner.js:69:9
 â¯ src/test/properties/xiangyu-skills.test.ts:459:8

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯

 FAIL  src/test/properties/xiangyu-skills.test.ts > Xiang Yu Beishui Skill Properties > Property 4: Beishui skill - total step limit enforcement
Error: Property failed after 1 tests
{ seed: -1431590058, path: "0:0:0:0:0", endOnFailure: true }
Counterexample: [{"pawn":{"id":" ","type":"pawn","color":"red","position":{"x":0,"y":0},"isAlive":true},"gameState":{"board":{"grid":[[{"id":" ","type":"pawn","color":"red","position":{"x":0,"y":0},"isAlive":true},null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null]],"BOARD_SIZE":{"width":9,"height":10}},"players":[{"id":"xiangyu_player_red","color":"red","hero":{"id":"xiangyu","name":"é¡¹ç¾½","skills":[{"isUsed":false,"type":"passive","id":"xiangyu_beishui","name":"èƒŒæ°´","description":"ä½ çš„å…µæœªè¿‡æ²³æ—¶ï¼Œå¯ä»¥ä¸€æ­¥ç›´æ¥è¿‡æ²³ï¼›è¿‡æ²³åï¼Œæ¯æ¬¡ç§»åŠ¨å¯ä»¥è¿èµ°ä¸¤æ­¥ï¼Œä½†æœ€å¤šå‰è¿›ä¸€æ­¥ã€‚"},{"isUsed":false,"type":"passive","id":"xiangyu_bawang","name":"éœ¸ç‹","description":"ä½ çš„é©¬ç§»åŠ¨æ—¶ï¼Œä¸å—æ‹Œé©¬è…¿å½±å“ï¼ˆé™¤éé©¬å—æ”»å‡»ï¼‰ï¼›ä½ ä¸èƒ½è¿ç»­ä¸¤æ­¥éƒ½é€‰æ‹©è·³é©¬ã€‚"}],"awakened":false,"avatar":"/heroes/xiangyu.jpg","description":"è¥¿æ¥šéœ¸ç‹ï¼ŒåŠ›æ‹”å±±å…®æ°”ç›–ä¸–ã€‚æ‹¥æœ‰å¼ºå¤§çš„å…µç§å’Œé©¬åŒ¹ä¼˜åŠ¿ã€‚"},"pieces":[]},{"id":"opponent","color":"black","hero":{"id":"test_hero","name":"æµ‹è¯•æ­¦å°†","skills":[],"awakened":false},"pieces":[]}],"currentPlayer":"red","gamePhase":"playing","moveHistory":[]}},3]
Shrunk 4 time(s)
Got AssertionError: expected 'å…µ/å’åªèƒ½èµ°ä¸€æ ¼' to contain 'ä¸¤æ­¥'
    at /Users/yummy/Code/Chess/src/test/properties/xiangyu-skills.test.ts:546:31
    at Property.predicate (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/property/Property.js:14:54)
    at Property.run (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/property/Property.generic.js:46:33)
    at runIt (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/runner/Runner.js:18:30)
    at check (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/runner/Runner.js:62:11)
    at Proxy.assert (file:///Users/yummy/Code/Chess/node_modules/fast-check/lib/esm/check/runner/Runner.js:65:17)
    at /Users/yummy/Code/Chess/src/test/properties/xiangyu-skills.test.ts:502:8
    at file:///Users/yummy/Code/Chess/node_modules/@vitest/runner/dist/index.js:135:14
    at file:///Users/yummy/Code/Chess/node_modules/@vitest/runner/dist/index.js:60:26
    at runTest (file:///Users/yummy/Code/Chess/node_modules/@vitest/runner/dist/index.js:781:17)

Hint: Enable verbose mode in order to have the list of all failing values encountered during the run
 â¯ src/test/properties/xiangyu-skills.test.ts:546:31
    544|         const result = moveValidator.validateMove(excessiveStepsMove, â€¦
    545|         expect(result.isValid).toBe(false);
    546|         expect(result.reason).toContain('ä¸¤æ­¥');
       |                               ^
    547|       }
    548|     ), { numRuns: 100 });
 â¯ Property.predicate node_modules/fast-check/lib/esm/check/property/Property.js:14:54
 â¯ Property.run node_modules/fast-check/lib/esm/check/property/Property.generic.js:46:33
 â¯ runIt node_modules/fast-check/lib/esm/check/runner/Runner.js:18:30
 â¯ check node_modules/fast-check/lib/esm/check/runner/Runner.js:62:11
 â¯ Proxy.assert node_modules/fast-check/lib/esm/check/runner/Runner.js:65:17
 â¯ src/test/properties/xiangyu-skills.test.ts:502:8
 â¯ buildError node_modules/fast-check/lib/esm/check/runner/utils/RunDetailsFormatter.js:126:15
 â¯ throwIfFailed node_modules/fast-check/lib/esm/check/runner/utils/RunDetailsFormatter.js:138:11
 â¯ reportRunDetails node_modules/fast-check/lib/esm/check/runner/utils/RunDetailsFormatter.js:151:16
 â¯ Proxy.assert node_modules/fast-check/lib/esm/check/runner/Runner.js:69:9
 â¯ src/test/properties/xiangyu-skills.test.ts:502:8

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/2]â¯

 Test Files  1 failed (1)
      Tests  2 failed | 10 passed (12)
   Start at  18:08:45
   Duration  4.58s (transform 467ms, setup 482ms, collect 856ms, tests 124ms, environment 1.19s, prepare 385ms)

